# Greeting API Plugin

## Installation

 > การติดตั้งสำหรับ Mac or Linux

```
$ yarn add git+ssh://git@repo.bluebik.com/experiments/hapi-mychannel-greeting.git#master
```

 > การติดตั้งสำหรับ Windows

```
$ yarn add git+http://git@repo.bluebik.com/experiments/hapi-mychannel-greeting.git#master
```

## Simple Usage

```
import * as Hapi from 'hapi';
import * as Glue from 'glue';

const host = process.env.HOST || '127.0.0.1';
const port = process.env.PORT || 3000;

const manifest = {
    server: {
        debug: {
            request: ['error'],
            log: ['error']
        }
    },
    connections: [
        {
            host: host,
            port: port
        }
    ],
    registrations: [
        {
            plugin: 'mychannel-greeting'
        }
    ]
};

const options = {
    relativeTo: __dirname
};

Glue.compose(manifest, options, (err, server : Hapi.Server) => {
    if (err) {
        throw err;
    }

    server.start(() => {
        server.log("Hello World", server.info);
        console.log('server is runing.');
    });
});
```

## APIs

### GET /api/greeting/{mobileNo}/recentactivities

#### Description

​	API สำหรับดึงข้อมูล Recent activities จาก SSB

#### Parameters:

+ `mobileNo` - หมายเลขโทรศัพท์ของลูกค้า

#### Required plugins

+ hapi-mychannel-ssb-it-transform สำหรับ
  + `ssbItTransform.queryActivityByMobile` สำหรับดึงข้อมูล Activities

#### Response

​	ส่งคืนค่ารายการ activities แต่ละ activity ประกอบด้วย createdDate, subCategory และ status

#### Response Body Example

```
{ 	
    activities: [ 
        { 
            createdDate: '11/05/2012 19:44:10',
            subCategory: 'เข้าใช้งาน eService',
            status: 'Done' 
        } 
    ]
}
```